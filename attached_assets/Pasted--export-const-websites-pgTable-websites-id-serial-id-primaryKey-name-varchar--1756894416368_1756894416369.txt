
export const websites = pgTable("websites", {
  id: serial("id").primaryKey(),
  name: varchar("name", { length: 255 }).notNull(),
  url: varchar("url", { length: 500 }).notNull(),
  wpAdminUsername: varchar("wp_admin_username", { length: 255 }),
  wpAdminPassword: varchar("wp_admin_password", { length: 255 }), // Should be encrypted in production
  wrmApiKey: varchar("wrm_api_key", { length: 255 }), // WP Remote Manager plugin API key
  wpVersion: varchar("wp_version", { length: 50 }),
  lastBackup: timestamp("last_backup"),
  lastUpdate: timestamp("last_update"),
  lastSync: timestamp("last_sync"),
  healthStatus: varchar("health_status", { length: 20 }).notNull().default("good"), // good, warning, error
  uptime: varchar("uptime", { length: 10 }).default("100%"),
  connectionStatus: varchar("connection_status", { length: 20 }).default("disconnected"), // connected, disconnected, error
  wpData: text("wp_data"), // JSON storage for WordPress data (plugins, themes, etc.)
  // Google Analytics configuration
  gaTrackingId: varchar("ga_tracking_id", { length: 255 }), // Google Analytics 4 Measurement ID (G-XXXXXXXXXX)
  gaPropertyId: varchar("ga_property_id", { length: 255 }), // Google Analytics Property ID
  gaViewId: varchar("ga_view_id", { length: 255 }), // Google Analytics View ID (for Universal Analytics)
  gaServiceAccountKey: text("ga_service_account_key"), // JSON key for service account (encrypted)
  gaConfigured: boolean("ga_configured").default(false), // Whether GA is properly configured
  gaLastSync: timestamp("ga_last_sync"), // Last time GA data was synced
  thumbnailUrl: varchar("thumbnail_url", { length: 500 }), // Screenshot/thumbnail URL
  screenshotUrl: varchar("screenshot_url", { length: 500 }), // External screenshot service URL
  thumbnailLastUpdated: timestamp("thumbnail_last_updated"), // Last time thumbnail was captured
  // White-label branding fields
  whiteLabelEnabled: boolean("white_label_enabled").default(false), // Whether white-labeling is enabled
  brandLogo: varchar("brand_logo", { length: 500 }), // Custom logo URL
  brandName: varchar("brand_name", { length: 255 }), // Custom brand name
  brandColor: varchar("brand_color", { length: 7 }), // Hex color code
  brandWebsite: varchar("brand_website", { length: 500 }), // Custom brand website URL
  brandingData: jsonb("branding_data"), // Additional branding configuration
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow(),
  clientId: integer("client_id").notNull().references(() => clients.id),
});
